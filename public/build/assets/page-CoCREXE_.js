import{j as e,r as i}from"./app-DB8TlnsV.js";import{B as g}from"./button-DMX-MKrq.js";import{C as w}from"./card-CI9vQH-T.js";import{P as S,D as f,a as C,b as N,c as v,e as E,d as D}from"./dialog-DumPowGA.js";import{T as k}from"./trash-2-NPbEQAsa.js";import{I as m}from"./input-BuOLKcCi.js";import{A}from"./layout-DpSS_TU7.js";import{C as T,d as M,e as O,f as B}from"./apis-CI8spAXj.js";import"./createLucideIcon-Dsf9OXO9.js";import"./index-DM__rdg-.js";function P({categories:n,onDelete:r,onEdit:l}){return e.jsx(w,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Slug"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Color"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-500",children:"No categories found"})}):n.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:s.type}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.slug}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-sm text-gray-600",children:s.color})]})}),e.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[e.jsx(g,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>l(s),children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>r(s.id),className:"gap-1 text-red-600 hover:text-red-700",children:e.jsx(k,{className:"w-4 h-4"})})]})]},s.id))})]})})})}function I({open:n,onOpenChange:r,onAdd:l}){const[s,c]=i.useState({name:"",slug:"",color:"#C62828"}),d=a=>{a.preventDefault(),s.name&&s.slug&&(l(s),c({name:"",slug:"",color:"#C62828"}))};return e.jsx(f,{open:n,onOpenChange:r,children:e.jsxs(C,{className:"max-w-md",children:[e.jsxs(N,{children:[e.jsx(v,{children:"Create New Category"}),e.jsx(E,{children:"Add a new category for articles"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name"}),e.jsx(m,{value:s.name,onChange:a=>c({...s,name:a.target.value}),placeholder:"e.g., Technology"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),e.jsx(m,{value:s.slug,onChange:a=>c({...s,slug:a.target.value}),placeholder:"e.g., technology"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:s.color,onChange:a=>c({...s,color:a.target.value}),className:"w-12 h-10 border rounded cursor-pointer"}),e.jsx(m,{value:s.color,onChange:a=>c({...s,color:a.target.value}),placeholder:"#C62828"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"}),e.jsx(g,{type:"submit",className:"flex-1",children:"Create Category"})]})]})]})})}function U({open:n,onOpenChange:r,category:l,onUpdate:s}){const[c,d]=i.useState(""),[a,h]=i.useState(""),[u,j]=i.useState("");i.useEffect(()=>{l&&(d(l.type),h(l.slug),j(l.color||"#000000"))},[l]);const y=()=>{s({...l,type:c,slug:a,color:u})};return e.jsx(f,{open:n,onOpenChange:r,children:e.jsxs(C,{children:[e.jsx(N,{children:e.jsx(v,{children:"Edit Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Category Name"}),e.jsx(m,{value:c,onChange:x=>d(x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Slug"}),e.jsx(m,{value:a,onChange:x=>h(x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Color"}),e.jsx(m,{type:"color",value:u,onChange:x=>j(x.target.value)})]}),e.jsx(g,{className:"w-full",onClick:y,children:"Save Changes"})]})]})})}const F=[{id:1,name:"Breaking News",slug:"breaking-news",color:"#C62828"},{id:2,name:"Politics",slug:"politics",color:"#1565C0"},{id:3,name:"Technology",slug:"technology",color:"#00796B"},{id:4,name:"Entertainment",slug:"entertainment",color:"#6A1B9A"},{id:5,name:"Lifestyle",slug:"lifestyle",color:"#F57C00"}];function V(){const[n,r]=i.useState(F),[l,s]=i.useState(!1),[c,d]=i.useState(!1),[a,h]=i.useState(null),u=async()=>{try{const t=await T();r(t.data.categories)}catch(t){console.log("Error fetching categories:",t)}};i.useEffect(()=>{u()},[]);const j=async t=>{try{const o=await M(t);r(p=>[...p,o.data.category]),s(!1)}catch(o){console.log("Error adding category:",o)}},y=t=>{h(t),d(!0)},x=async t=>{try{const o=await O(t.id,t);r(n.map(p=>p.id===t.id?o.data.category:p)),d(!1)}catch(o){console.log("Error updating:",o)}},b=async t=>{try{await B(t),r(n.filter(o=>o.id!==t))}catch(o){console.log("Error deleting category:",o)}};return e.jsxs(A,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage article categories"})]}),e.jsxs(g,{onClick:()=>s(!0),className:"gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"New Category"]})]}),e.jsx(P,{categories:n,onDelete:b,onEdit:y}),e.jsx(I,{open:l,onOpenChange:s,onAdd:j})]}),e.jsx(U,{open:c,onOpenChange:d,category:a,onUpdate:x})]})}export{V as default};
